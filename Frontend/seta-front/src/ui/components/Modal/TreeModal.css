/* ===== 백드롭/쉘 ===== */
.treemodal-backdrop {
    position: fixed; inset: 0; z-index: 999;
    display: grid; place-items: center;
    background: rgba(0,0,0,.4);
    backdrop-filter: blur(4px);
    padding: 12px; box-sizing: border-box;
}
.treemodal-shell {
    width: min(960px, 92vw);
    max-height: 88dvh;
    border-radius: 20px;
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.08);
    backdrop-filter: blur(20px) saturate(120%);
    -webkit-backdrop-filter: blur(20px) saturate(120%);
    box-shadow:
            0 1px 0 0 rgba(255,255,255,.1),
            0 8px 32px rgba(0,0,0,.3),
            inset 0 1px 0 rgba(255,255,255,.05);
    overflow: hidden;
}

/* ===== 컨테이너(스크롤 담당) ===== */
.lgm-container {
    width: min(960px,92vw);
    max-height: inherit;
    margin: 0 auto 8px;
    padding: 24px;
    box-sizing: border-box;
    display: grid;
    gap: 32px;
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
}
.lgm-container::-webkit-scrollbar { display: none; }

/* ===== Theme / Tokens ===== */
:root{
    --text:#f2f4f7;
    --text-dim:#d1d5db;
    --text-sub:#9ca3af;

    --accent:#14b88f;
    --accent-2:#0fa37f;

    --border:rgba(255,255,255,.12);
    --border-soft:rgba(255,255,255,.06);
    --glass-bg:rgba(255,255,255,.08);
    --glass-surface:linear-gradient(145deg,rgba(255,255,255,.1) 0%, rgba(255,255,255,.03) 100%);

    --shadow-subtle: 0 1px 0 0 rgba(255,255,255,.1),
    0 8px 32px rgba(0,0,0,.3),
    inset 0 1px 0 rgba(255,255,255,.05);

    --r-xl:20px;
    --r-lg:16px;
    --r-md:12px;

    --h1:clamp(26px,3.8vw,40px);
    --h2:clamp(17px,2vw,22px);

    --timeline-progress:.83;

    /* KPI 내부 행 높이 (줄맞춤 핵심) */
    --kpi-h-icon: 28px;
    --kpi-h-value: 34px;
    --kpi-h-label: 20px;
    --kpi-h-hint: 22px;
}

/* ===== 공통 카드 ===== */
.lgm-card{
    border-radius:var(--r-xl); padding:24px;
    background:var(--glass-surface);
    border:1px solid var(--border);
    backdrop-filter:blur(20px) saturate(120%);
    -webkit-backdrop-filter:blur(20px) saturate(120%);
    box-shadow:var(--shadow-subtle);
    transition:all .3s ease;
}
.lgm-card:hover{ border-color:rgba(255,255,255,.18); transform:translateY(-1px); }

/* ===== Hero ===== */
.lgm-header{ display:flex; align-items:center; justify-content:center; gap:14px; text-align:center; flex-wrap:wrap; }
.lgm-badge{ width:60px;height:60px; border-radius:50%; display:grid; place-items:center; background:var(--glass-bg); border:1px solid var(--border); backdrop-filter:blur(16px) saturate(115%); font-size:28px; transition:transform .2s ease; }
.lgm-badge:hover{ transform:scale(1.02); }
.lgm-title{ font-size:var(--h1); font-weight:600; letter-spacing:-.01em; margin:0; color: #ffffff; }
.lgm-subtitle{ color: #ffffff; margin:10px 0 0; text-align:center; line-height:1.6; }

/* ===== Tree Garden ===== */
.lgm-tree-garden{ display:flex; justify-content:center; gap:24px; flex-wrap:wrap; padding:12px 0; }
.lgm-tree{ display:flex; flex-direction:column; align-items:center; gap:10px; min-width:90px; }
.lgm-tree__emoji{ font-size:52px; filter:drop-shadow(0 4px 8px rgba(0,0,0,.2)); transition:transform .2s ease; }
.lgm-tree--ok .lgm-tree__emoji:hover{ transform:scale(1.05); }
.lgm-tag{ background:var(--glass-bg); border:1px solid var(--border-soft); color:#ffffff; font-weight:600; padding:8px 14px; border-radius:var(--r-md); backdrop-filter:blur(12px) saturate(110%); transition:all .2s ease; white-space:nowrap; }
.lgm-tag--ok{ color:#d0f0e4; background:rgba(20,184,143,.12); border-color:rgba(20,184,143,.25); }

/* ===== Progress ===== */
.lgm-section-title{ text-align:center; font-size:var(--h2); font-weight:600; letter-spacing:-.01em; margin:0 0 16px; color: #ffffff; }
.lgm-progress{ display:grid; gap:12px; }
.lgm-bar{ height:12px; border-radius:var(--r-md); background:var(--glass-bg); border:1px solid var(--border-soft); overflow:hidden; position:relative; backdrop-filter:blur(12px) saturate(110%); }
.lgm-fill{ height:100%; background:linear-gradient(90deg,var(--accent),var(--accent-2)); border-radius:inherit; transition:width .4s ease; }
.lgm-pct{ position:absolute; right:10px; top:50%; transform:translateY(-50%); font-size:11px; font-weight:700; color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.4); }
.lgm-meta{ display:flex; gap:10px; justify-content:space-between; flex-wrap:wrap; }
.lgm-chip{ background:var(--glass-bg); border:1px solid var(--border-soft); color:#ffffff; font-weight:600; padding:8px 12px; border-radius:var(--r-md); backdrop-filter:blur(12px) saturate(110%); font-size:13px; }
.lgm-chip--green{ color:#d0f0e4; background:rgba(20,184,143,.12); border-color:rgba(20,184,143,.25); }

/* ===== KPI Section (줄 맞춤 해결판) ===== */
.lgm-kpis{
    display:flex;
    flex-direction: column;
    gap:16px;
}

.lgm-kpis-grid{
    display:flex;
    gap:16px;
    flex-wrap: wrap;
    align-items: stretch;
}
@media (max-width: 1024px){
    .lgm-kpis-grid{ 
        flex-direction: column;
    }
}
@media (max-width: 640px){
    .lgm-kpis-grid{ 
        flex-direction: column;
    }
}

.lgm-kpi{
    display:flex;
    flex-direction: column;
    justify-content: space-between;
    flex: 1;
    min-width: 200px;
    
    border-radius: var(--r-lg);
    padding: 20px 16px;
    background: var(--glass-surface);
    border: 1px solid var(--border);
    backdrop-filter: blur(16px) saturate(115%);
    transition: all .2s ease;
    text-align: center;
    min-width: 0;
    height: 160px; /* 고정 높이로 설정 */
}
.lgm-kpi:hover{ transform: translateY(-2px); border-color: rgba(255,255,255,.18); }

.lgm-kpi__icon{
    font-size:22px; 
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 8px;
}
.lgm-kpi__value{
    font-weight:700; font-size:24px;
    height: 34px;
    display: flex;
    align-items: center;
    justify-content: center;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    margin-bottom: 8px;
    color: #ffffff; /* 값은 흰색으로 */
}
.lgm-kpi__label{
    color: #ffffff; font-size:13px; font-weight:500; /* 라벨은 흰색으로 */
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    margin-bottom: 8px;
}
.lgm-kpi__hint{
    color: #ffffff; font-weight:600; font-size:12px; /* 힌트도 흰색으로 변경 */
    height: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    margin-top: auto; /* 하단으로 밀어내기 */
}

/* 혹시 모달 내부 가로 스크롤 발생 시 방지 */
.lgm-card,
.lgm-card-lite,
.lgm-item,
.lgm-kpi { min-width: 0; }

/* ===== Timeline ===== */
.lgm-timeline{ display:grid; gap:16px; position:relative; padding-left:72px; }
.lgm-timeline::before{
    content:""; position:absolute; left:36px; top:6px; bottom:6px; width:2px; border-radius:2px;
    background:linear-gradient(180deg,rgba(255,255,255,.12),rgba(255,255,255,.04));
}
.lgm-timeline::after{
    content:""; position:absolute; left:36px; top:6px; width:2px; border-radius:2px;
    height:calc(var(--timeline-progress) * (100% - 12px));
    background:linear-gradient(180deg,var(--accent),var(--accent-2));
    transition:height .6s ease;
}
.lgm-item{ display:grid; grid-template-columns:64px 1fr; gap:14px; align-items:start; min-width:0; }
.lgm-dot{
    width:64px; height:64px; border-radius:50%; display:grid; place-items:center;
    font-size:30px; color:#fff; user-select:none;
    background:var(--glass-bg); border:1px solid var(--border);
    backdrop-filter:blur(16px) saturate(115%); box-shadow:0 4px 12px rgba(0,0,0,.15);
    transition:transform .2s ease; flex:0 0 auto;
}
.lgm-item--done .lgm-dot{ background:rgba(20,184,143,.15); border-color:rgba(20,184,143,.3); }
.lgm-item--progress .lgm-dot{ background:rgba(255,180,96,.15); border-color:rgba(255,180,96,.3); }
.lgm-item--upcoming .lgm-dot{ background:var(--glass-bg); opacity:.7; }

.lgm-card-lite{ padding:16px; border-radius:var(--r-md); background:var(--glass-bg); border:1px solid var(--border-soft); backdrop-filter:blur(12px) saturate(110%); transition:all .2s ease; min-width:0; }
.lgm-card-lite:hover{ background:rgba(255,255,255,.1); border-color:var(--border); }
.lgm-item__head{ display:flex; align-items:center; gap:8px; margin-bottom:6px; flex-wrap:wrap; }
.lgm-stage{ font-weight:700; margin:0; font-size:14px; color:#ffffff; }
.lgm-st{ padding:5px 8px; border-radius:var(--r-md); font-size:11px; font-weight:700; background:var(--glass-bg); border:1px solid var(--border-soft); color:#ffffff; }
.lgm-st--done{ color:#d0f0e4; background:rgba(20,184,143,.15); border-color:rgba(20,184,143,.3); }
.lgm-st--progress{ color:#ffe2bf; background:rgba(255,166,77,.15); border-color:rgba(255,166,77,.3); }
.lgm-date{ color:#ffffff; font-size:12px; margin-bottom:6px; font-weight:500; }
.lgm-desc{ color:#ffffff; font-size:13px; line-height:1.6; overflow-wrap:anywhere; }

/* ===== CTA ===== */
.lgm-cta{ text-align:center; display:grid; gap:14px; }
.lgm-btns{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:4px; }
.lgm-btn{
    border:1px solid var(--border); background:var(--glass-bg); color:#ffffff;
    font-weight:600; border-radius:var(--r-md); padding:12px 18px;
    backdrop-filter:blur(12px) saturate(110%); transition:all .2s ease; cursor:pointer; font-size:14px;
}
.lgm-btn:hover{ transform:translateY(-1px); border-color:rgba(255,255,255,.2); }
.lgm-btn-primary{ background:linear-gradient(135deg,var(--accent),var(--accent-2)); border:none; color:#fff; font-weight:700; }
.lgm-btn-primary:hover{ transform:translateY(-1px); box-shadow:0 8px 20px rgba(20,184,143,.25); }

/* ===== Responsive tweaks ===== */
@media(max-width: 1024px){
    .lgm-container{ gap:24px; padding:16px; }
    .lgm-card{ padding:20px; }
    .lgm-tree__emoji{ font-size:46px; }
}
@media(max-width:480px){
    .lgm-card{ padding:14px; }
    .lgm-tree-garden{ gap:16px; }
    .lgm-tree__emoji{ font-size:38px; }
    .lgm-dot{ width:48px; height:48px; font-size:22px; }
    .lgm-timeline{ padding-left:56px; }
    .lgm-timeline::before, .lgm-timeline::after{ left:28px; }
    .lgm-item{ grid-template-columns:48px 1fr; gap:10px; }

    /* 모바일은 KPI 한 열이라 줄맞춤 자동 */
}
